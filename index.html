<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KollAnalyst - Proficiency Graph</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f7f7f7;
        }
        #graph-container {
            width: 80%;
            max-width: 600px;
        }
        .teacher-input {
            margin-bottom: 20px;
        }
        input {
            margin: 5px;
        }
    </style>
</head>
<body>

<h2>KollAnalyst - Proficiency Level Distribution</h2>

<div id="teacher-container">
    <div class="teacher-input">
        <h3>Teacher 1</h3>
        <label for="fours1">Number of 4s:</label>
        <input type="number" id="fours1" value="0">
        <label for="threes1">Number of 3s:</label>
        <input type="number" id="threes1" value="0">
        <label for="twos1">Number of 2s:</label>
        <input type="number" id="twos1" value="0">
        <label for="ones1">Number of 1s:</label>
        <input type="number" id="ones1" value="0">
    </div>
</div>

<button onclick="addTeacher()">Add Another Teacher</button>
<button onclick="updateGraph()">Graph Proficiency</button>

<div id="graph-container">
    <div id="graph"></div>
</div>

<script>
    let teacherCount = 1;

    function addTeacher() {
        teacherCount++;
        const teacherDiv = document.createElement('div');
        teacherDiv.classList.add('teacher-input');
        teacherDiv.innerHTML = `
            <h3>Teacher ${teacherCount}</h3>
            <label for="fours${teacherCount}">Number of 4s:</label>
            <input type="number" id="fours${teacherCount}" value="0">
            <label for="threes${teacherCount}">Number of 3s:</label>
            <input type="number" id="threes${teacherCount}" value="0">
            <label for="twos${teacherCount}">Number of 2s:</label>
            <input type="number" id="twos${teacherCount}" value="0">
            <label for="ones${teacherCount}">Number of 1s:</label>
            <input type="number" id="ones${teacherCount}" value="0">
        `;
        document.getElementById('teacher-container').appendChild(teacherDiv);
    }

    function updateGraph() {
        let totalFours = 0;
        let totalThrees = 0;
        let totalTwos = 0;
        let totalOnes = 0;

        for (let i = 1; i <= teacherCount; i++) {
            totalFours += parseInt(document.getElementById(`fours${i}`).value);
            totalThrees += parseInt(document.getElementById(`threes${i}`).value);
            totalTwos += parseInt(document.getElementById(`twos${i}`).value);
            totalOnes += parseInt(document.getElementById(`ones${i}`).value);
        }

        const total = totalFours + totalThrees + totalTwos + totalOnes;

        const proficiencyPercentages = [
            (totalFours / total * 100).toFixed(2),
            (totalThrees / total * 100).toFixed(2),
            (totalTwos / total * 100).toFixed(2),
            (totalOnes / total * 100).toFixed(2)
        ];

        const data = [{
            values: [totalFours, totalThrees, totalTwos, totalOnes],
            labels: ['4s', '3s', '2s', '1s'],
            type: 'pie',
            hole: .4,  // Makes it a donut chart
            textinfo: 'label+percent',
            insidetextorientation: 'radial'
        }];

        const layout = {
            title: 'Proficiency Level Distribution (%)',
            showlegend: true
        };

        Plotly.newPlot('graph', data, layout);
    }
</script>

</body>
</html>
